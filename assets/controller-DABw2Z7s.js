var c=Object.defineProperty;var d=(e,t,s)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var l=(e,t,s)=>d(e,typeof t!="symbol"?t+"":t,s);import{r as u}from"./index-DovjO4NE.js";import{a as i,m,s as p}from"./utils-B56ENZT9.js";class o{static close(){this.controller&&this.controller.sendData("close")}static create(t,s){this.controller=new i(t),this.controller.onConnection(()=>{s("open")}),this.controller.onConnectionClose(()=>{s("close")}),this.controller.onData(r=>{r.type==="ack"&&this.controller.sendData({type:"ack",randomValue:r.randomValue})})}static send(t){this.controller.sendData({type:"input",input:t})}}l(o,"controller");const f=document.querySelector(".left"),h=document.querySelector(".right"),y=document.querySelector(".jump"),n=m();console.log(n?"Mobile":"Desktop");const a=(e,t)=>{if(!e){console.error(`${t} button not found`);return}n?(e.addEventListener("touchstart",()=>{o.send(`${t}_press`)}),e.addEventListener("touchend",()=>{o.send(`${t}_release`)}),e.addEventListener("touchcancel",()=>{o.send(`${t}_release`)})):(e.addEventListener("mousedown",()=>{o.send(`${t}_press`)}),e.addEventListener("mouseup",()=>{o.send(`${t}_release`)}),e.addEventListener("mouseleave",()=>{o.send(`${t}_release`)}))},v=e=>{if(!e){console.error("Jump button not found");return}n?e.addEventListener("touchstart",()=>{o.send("jump")}):e.addEventListener("mousedown",()=>{o.send("jump")})},$=async()=>{await p("f54e4ce47b7d6e0582e7ed4b9a744679dbb2");const e=u.getParam("key");if(!e){console.error("No key found");return}o.create(e,t=>console.log(t)),a(f,"left"),a(h,"right"),v(y)};export{$ as default};
