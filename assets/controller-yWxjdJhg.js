var a=Object.defineProperty;var c=(e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var r=(e,t,s)=>c(e,typeof t!="symbol"?t+"":t,s);import{a as d,r as u}from"./index-Bfmu9oh1.js";class o{static close(){this.controller&&this.controller.sendData("close")}static create(t,s){this.controller=new d(t),this.controller.onConnection(()=>{s("open")}),this.controller.onConnectionClose(()=>{s("close")}),this.controller.onData(n=>{n.type==="ack"&&this.controller.sendData({type:"ack",randomValue:n.randomValue})})}static send(t){this.controller.sendData({type:"input",input:t})}}r(o,"controller");const i=document.querySelector(".left"),m=document.querySelector(".right"),p=document.querySelector(".jump"),l=(e,t)=>{if(!e){console.error(`${t} button not found`);return}e.addEventListener("mousedown",()=>{o.send(`${t}_press`)}),e.addEventListener("mouseup",()=>{o.send(`${t}_release`)}),e.addEventListener("touchstart",()=>{o.send(`${t}_press`)}),e.addEventListener("touchend",()=>{o.send(`${t}_release`)}),e.addEventListener("mouseleave",()=>{o.send(`${t}_release`)}),e.addEventListener("touchcancel",()=>{o.send(`${t}_release`)})},h=e=>{if(!e){console.error("Jump button not found");return}e.addEventListener("mousedown",()=>{o.send("jump")}),e.addEventListener("touchstart",()=>{o.send("jump")})},y=()=>{const e=u.getParam("key");if(!e){console.error("No key found");return}o.create(e,t=>console.log(t)),l(i,"left"),l(m,"right"),h(p)};export{y as default};
