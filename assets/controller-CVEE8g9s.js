var a=Object.defineProperty;var c=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var r=(e,t,n)=>c(e,typeof t!="symbol"?t+"":t,n);import{a as d,r as u}from"./index-CfMvipUF.js";class o{static close(){this.controller&&this.controller.sendData("close")}static create(t,n){this.controller=new d(t),this.controller.onConnection(()=>{n("open")}),this.controller.onConnectionClose(()=>{n("close")}),this.controller.onData(s=>{s.type==="ack"&&this.controller.sendData({type:"ack",randomValue:s.randomValue})})}static send(t){this.controller.sendData({type:"input",input:t})}}r(o,"controller");const p=document.querySelector(".left"),i=document.querySelector(".right"),m=document.querySelector(".jump"),l=(e,t)=>{if(!e){console.error(`${t} button not found`);return}e.addEventListener("mousedown",()=>{o.send(`${t}_press`)}),e.addEventListener("mouseup",()=>{o.send(`${t}_release`)}),e.addEventListener("touchstart",()=>{o.send(`${t}_press`)}),e.addEventListener("touchend",()=>{o.send(`${t}_release`)}),e.addEventListener("mouseleave",()=>{o.send(`${t}_release`)}),e.addEventListener("touchcancel",()=>{o.send(`${t}_release`)})},h=e=>{if(!e){console.error("Jump button not found");return}e.addEventListener("mousedown",()=>{e.append("jump button down"),o.send("jump")}),e.addEventListener("touchstart",()=>{e.append("jump button touch start"),o.send("jump")})},y=()=>{const e=u.getParam("key");if(!e){console.error("No key found");return}o.create(e,t=>console.log(t)),l(p,"left"),l(i,"right"),h(m)};export{y as default};
